<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸</title>

  <!-- âœ… ë§í¬ ê³µìœ  ì‹œ ì¸ë„¤ì¼/ë¯¸ë¦¬ë³´ê¸°(OG) -->
  <!-- ë°°í¬ ì‹œ ê°™ì€ í´ë”ì— thumbnail.pngë¥¼ ë‘ë©´ ê°€ì¥ ì•ˆì •ì  -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸" />
  <meta property="og:description" content="ì§ˆë¬¸ ì¹´ë“œë¡œ ë¹ ë¥´ê²Œ ì—°ë§ ê²°ì‚°í•˜ê³ , ì™„ë£Œ í˜ì´ì§€ì—ì„œ ë³µì‚¬/ìˆ˜ì •ê¹Œì§€ í•œ ë²ˆì—!" />
<meta property="og:image" content="https://kjw970202-glitch.github.io/yearly-review-helper/thumbnail.png" />
<meta property="og:url" content="https://kjw970202-glitch.github.io/yearly-review-helper/" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="ko_KR" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸" />
  <meta name="twitter:description" content="ì§ˆë¬¸ ì¹´ë“œë¡œ ë¹ ë¥´ê²Œ ì—°ë§ ê²°ì‚°í•˜ê³ , ì™„ë£Œ í˜ì´ì§€ì—ì„œ ë³µì‚¬/ìˆ˜ì •ê¹Œì§€ í•œ ë²ˆì—!" />
  <meta name="twitter:image" content="thumbnail.png" />

  <!-- âœ… GA4 (head 1íšŒ) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CD6MLMJ7B9"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-CD6MLMJ7B9');
  </script>

  <style>
    :root{
      --bg:#fff6f7;
      --card: rgba(255,255,255,.92);
      --text:#1b1b1b;
      --muted:#5d5d5d;
      --line:rgba(0,0,0,.08);

      --accent:#d12b2b;
      --accent2:#ff4a4a;

      --ok:#0c8f47;
      --danger:#d12b2b;

      --shadow: 0 16px 50px rgba(0,0,0,.08);
      --r: 20px;
      --pad: 18px;

      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
        "Noto Sans KR", AppleSDGothicNeo, "Malgun Gothic", Arial, sans-serif;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:22px 14px 60px;

      background:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='240' viewBox='0 0 240 240'%3E%3Crect width='240' height='240' fill='none'/%3E%3Cg fill='%23ffffff' fill-opacity='0.9'%3E%3Ccircle cx='30' cy='40' r='2'/%3E%3Ccircle cx='80' cy='90' r='1.8'/%3E%3Ccircle cx='140' cy='60' r='2.2'/%3E%3Ccircle cx='200' cy='110' r='1.6'/%3E%3Ccircle cx='50' cy='160' r='2'/%3E%3Ccircle cx='120' cy='170' r='1.6'/%3E%3Ccircle cx='210' cy='190' r='2.2'/%3E%3C/g%3E%3C/svg%3E"),
        linear-gradient(180deg, #fff6f7 0%, #ffeef0 100%);
      background-repeat: repeat, no-repeat;
      background-size: 240px 240px, cover;
      background-attachment: fixed;
    }

    .wrap{ width:min(920px, 100%); }

    .screen{
      transition: opacity .35s ease, transform .35s ease;
      will-change: opacity, transform;
    }
    .hidden{
      opacity:0;
      transform: translateY(8px);
      pointer-events:none;
      position:absolute;
      inset:0;
    }
    .visible{
      opacity:1;
      transform: translateY(0);
      position:relative;
    }

    .start{
      width:min(820px, 100%);
      margin: 18px auto 0;
      border-radius:28px;
      padding:30px 22px 22px;
      background: rgba(255,255,255,.90);
      border:1px solid var(--line);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      position:relative;
      overflow:hidden;
    }

    .start::before{
      content:"";
      position:absolute; inset:-120px -120px auto auto;
      width:320px; height:320px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%,
        color-mix(in srgb, var(--accent2) 28%, transparent),
        color-mix(in srgb, var(--accent) 18%, transparent) 40%,
        transparent 72%);
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.85);
      color:var(--muted);
      font-weight:900;
      font-size:12px;
    }

    .start-title{
      margin:16px 0 18px;
      font-size:34px;
      font-weight:1000;
      letter-spacing:-.9px;
      line-height:1.15;
    }

    .start-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    button, a.btn{
      border:1px solid rgba(0,0,0,.10);
      background:rgba(255,255,255,.92);
      color:var(--text);
      padding:12px 14px;
      border-radius:16px;
      cursor:pointer;
      font-weight:1000;
      font-size:14px;
      transition: transform .06s ease, background .2s ease, border-color .2s ease, opacity .2s ease, filter .2s ease;
      user-select:none;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    button:hover, a.btn:hover{ background:#fff; border-color:rgba(0,0,0,.16); }
    button:active, a.btn:active{ transform: translateY(1px); }
    button:disabled{ opacity:.45; cursor:not-allowed; }

    .primary{
      color:#fff !important;
      background: linear-gradient(90deg, var(--accent), var(--accent2)) !important;
      border-color: color-mix(in srgb, var(--accent) 25%, transparent) !important;
      padding:14px 16px;
      border-radius:18px;
      box-shadow: 0 18px 40px color-mix(in srgb, var(--accent) 18%, transparent);
    }
    .primary:hover{ filter: brightness(1.03); }

    .ghost{
      background:transparent !important;
      border-color:rgba(0,0,0,.12) !important;
    }
/* ğŸ’¬ í”¼ë“œë°± ë²„íŠ¼ hover UX ê°•í™” */
    .btn.ghost:hover {
      border-color: rgba(209,43,43,0.35);
      background: rgba(209,43,43,0.05);
    }
    .ghost:hover{ background:rgba(255,255,255,.75) !important; }

    .danger{
      color:#fff !important;
      background: linear-gradient(90deg, #b51f1f, var(--accent2)) !important;
      border-color: color-mix(in srgb, var(--accent) 25%, transparent) !important;
    }

    .icon{ width:18px;height:18px;display:inline-block;flex:0 0 auto; }
    .icon svg{ width:100%;height:100%; }

    header{
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:flex-start;
      margin-bottom:14px;
    }
    .brand{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .title{
      margin:0;
      font-size:22px;
      font-weight:1000;
      letter-spacing:-.3px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background:rgba(255,255,255,.85);
      color:var(--muted);
      font-size:12px;
      user-select:none;
      backdrop-filter: blur(6px);
      white-space:nowrap;
    }

    .top-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
      margin-bottom:12px;
    }

    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      overflow:hidden;
    }
    .card-head{
      padding:16px var(--pad);
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .card-head h2{
      margin:0;
      font-size:13px;
      color:var(--muted);
      font-weight:1000;
      letter-spacing:-.1px;
    }
    .card-body{
      padding:18px var(--pad);
    }

    .progress{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:14px;
    }
    .bar{
      flex:1;
      height:10px;
      background:rgba(0,0,0,.06);
      border-radius:999px;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.06);
    }
    .bar > i{
      display:block;
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius:999px;
      transition: width .28s ease;
    }
    .pct{
      min-width:100px;
      text-align:right;
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }

    .qcard{
      border-radius:18px;
      border:1px solid var(--line);
      background:
        radial-gradient(520px 160px at 16% 20%, color-mix(in srgb, var(--accent) 10%, transparent), transparent 60%),
        radial-gradient(520px 180px at 86% 60%, color-mix(in srgb, var(--accent2) 9%, transparent), transparent 65%),
        rgba(255,255,255,.78);
      padding:16px;
      margin-bottom:12px;
      will-change: transform, opacity;
    }
    .qnum{
      font-size:12px;
      color:var(--muted);
      font-weight:900;
      margin-bottom:6px;
    }
    .qtext{
      margin:0;
      font-size:20px;
      font-weight:1000;
      letter-spacing:-.35px;
      line-height:1.25;
    }

    textarea{
      width:100%;
      min-height:120px;
      resize:vertical;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(0,0,0,.10);
      background:rgba(255,255,255,.92);
      color:var(--text);
      outline:none;
      font-size:14px;
      line-height:1.6;
      transition: box-shadow .2s ease, border-color .2s ease;
    }
    textarea:focus{
      border-color: color-mix(in srgb, var(--accent) 45%, transparent);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 14%, transparent);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
      align-items:center;
      justify-content:space-between;
    }
    .actions-left, .actions-right{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    @keyframes slideOutLeft{
      0% { opacity:1; transform: translateX(0) scale(1); }
      100% { opacity:0; transform: translateX(-26px) scale(.985); }
    }
    @keyframes slideInRight{
      0% { opacity:0; transform: translateX(26px) scale(.985); }
      55% { opacity:1; transform: translateX(-2px) scale(1.008); }
      100% { opacity:1; transform: translateX(0) scale(1); }
    }
    @keyframes slideOutRight{
      0% { opacity:1; transform: translateX(0) scale(1); }
      100% { opacity:0; transform: translateX(26px) scale(.985); }
    }
    @keyframes slideInLeft{
      0% { opacity:0; transform: translateX(-26px) scale(.985); }
      55% { opacity:1; transform: translateX(2px) scale(1.008); }
      100% { opacity:1; transform: translateX(0) scale(1); }
    }
    .anim-out-left{ animation: slideOutLeft .22s cubic-bezier(.2,.9,.2,1) both; }
    .anim-in-right{ animation: slideInRight .34s cubic-bezier(.2,.9,.2,1) both; }
    .anim-out-right{ animation: slideOutRight .22s cubic-bezier(.2,.9,.2,1) both; }
    .anim-in-left{ animation: slideInLeft .34s cubic-bezier(.2,.9,.2,1) both; }

    .done-hero{
      padding:20px;
      border-radius:24px;
      border:1px solid color-mix(in srgb, var(--accent) 14%, rgba(0,0,0,.10));
      background:
        radial-gradient(620px 200px at 12% 20%, color-mix(in srgb, var(--accent2) 18%, transparent), transparent 60%),
        radial-gradient(620px 220px at 88% 80%, color-mix(in srgb, var(--accent) 16%, transparent), transparent 65%),
        rgba(255,255,255,.92);
      margin-bottom:12px;
      position:relative;
      overflow:hidden;
    }
    .done-hero h2{
      margin:0 0 8px;
      font-size:22px;
      letter-spacing:-.35px;
      font-weight:1000;
    }
    .done-hero p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.55;
      font-weight:700;
    }

    .tools{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
      align-items:center;
    }

    .list{
      display:flex;
      flex-direction:column;
      gap:10px;
      max-height:520px;
      overflow:auto;
      padding-right:6px;
    }

    .item{
      border:1px solid var(--line);
      background:rgba(255,255,255,.88);
      border-radius:16px;
      padding:12px;
      transition: background .35s ease, border-color .2s ease;
    }
    .item.answered{
      background:
        radial-gradient(520px 140px at 12% 20%, color-mix(in srgb, var(--accent2) 10%, transparent), transparent 60%),
        radial-gradient(520px 160px at 88% 70%, color-mix(in srgb, var(--accent) 9%, transparent), transparent 62%),
        rgba(255,255,255,.94);
      border-color: color-mix(in srgb, var(--accent) 14%, rgba(0,0,0,.10));
    }
    .meta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:6px;
    }
    .meta b{
      font-size:12px;
      color:var(--muted);
      font-weight:1000;
    }
    .tag{
      font-size:11px;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.10);
      color:var(--muted);
      background:rgba(255,255,255,.92);
      white-space:nowrap;
      font-weight:900;
    }
    .ans{
      margin:0;
      font-size:13px;
      line-height:1.55;
      color:#222;
      white-space:pre-wrap;
      word-break:break-word;
    }
    .empty{
      color:rgba(93,93,93,.75);
      font-style:italic;
    }
    .editbtn{
      margin-top:10px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      font-weight:1000;
      color: var(--accent);
      background: color-mix(in srgb, var(--accent) 7%, transparent);
      border:1px solid color-mix(in srgb, var(--accent) 14%, transparent);
      padding:8px 10px;
      border-radius:12px;
      cursor:pointer;
      user-select:none;
    }
    .editbtn:hover{ filter:brightness(1.02); }

    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:rgba(255,255,255,.95);
      border:1px solid rgba(0,0,0,.12);
      box-shadow:var(--shadow);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      font-size:13px;
      display:none;
      gap:10px;
      align-items:center;
      z-index:80;
      max-width:min(720px, 92vw);
      font-weight:900;
    }
    .dot{
      width:9px; height:9px;
      border-radius:50%;
      background:var(--ok);
      box-shadow:0 0 0 3px rgba(12,143,71,.12);
      flex:0 0 auto;
    }

    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.35);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:90;
      padding:16px;
    }
    .modal{
      width:min(860px, 100%);
      border-radius:22px;
      background: rgba(255,255,255,.96);
      border:1px solid rgba(0,0,0,.12);
      box-shadow: 0 30px 80px rgba(0,0,0,.18);
      overflow:hidden;
    }
    .modal-head{
      padding:14px 16px;
      border-bottom:1px solid rgba(0,0,0,.10);
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
    }
    .modal-head b{
      font-weight:1000;
      letter-spacing:-.2px;
    }
    .modal-body{
      padding:16px;
    }
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }
    .row input{
      flex:1;
      min-width:240px;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(0,0,0,.10);
      background:rgba(255,255,255,.92);
      outline:none;
      font-size:13px;
      font-weight:800;
    }
    .help{
      margin:10px 0 0;
      font-size:12px;
      color:var(--muted);
      line-height:1.55;
      font-weight:700;
    }

    .fx-layer{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:100;
      overflow:hidden;
    }
    .confetti{
      position:absolute;
      top:-16px;
      width:10px;
      height:16px;
      border-radius:4px;
      opacity:.95;
      animation: confettiFall linear forwards;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.10));
    }
    @keyframes confettiFall{
      to { transform: translateY(110vh) rotate(640deg); opacity: 1; }
    }
    .spark{
      position:absolute;
      width:10px;height:10px;
      border-radius:50%;
      opacity:.9;
      animation: sparkBurst .9s ease-out forwards;
      filter: blur(.1px);
    }
    @keyframes sparkBurst{
      0% { transform: translate(-50%,-50%) scale(.35); opacity:0; }
      15% { opacity:1; }
      100% { transform: translate(-50%,-50%) scale(2.6); opacity:0; }
    }

    .kbd{
      font-weight:1000;
      font-size:12px;
      color:var(--muted);
    }
    code{
      background: rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.08);
      padding: 2px 6px;
      border-radius: 8px;
      font-weight: 900;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- ===== Start Screen ===== -->
    <section id="startScreen" class="screen visible">
      <div class="start">
        <span class="badge">ğŸ ì—°ë§ ê²°ì‚°</span>
        <h1 class="start-title" id="startTitle">2025ë…„, ìˆ˜ê³ í–ˆì–´ìš”!<br/>ê²°ì‚° í•œ ë²ˆ í•´ë³´ì„¸ìš”!</h1>

        <div class="start-actions">
          <button class="primary" id="startBtn">âœ¨ ì‹œì‘í•˜ê¸°</button>

          <a class="btn ghost" id="usageBtn" target="_blank" rel="noopener">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none">
                <path d="M6 18V6h4l4 6V6h4v12h-4l-4-6v6H6z" fill="#03C75A"/>
              </svg>
            </span>
            í™œìš© ì˜ˆì‹œ
          </a>

          <button class="ghost" id="newStartBtn" title="ì €ì¥ëœ ì§„í–‰ì„ ì´ˆê¸°í™”í•˜ê³  ìƒˆë¡œ ì‹œì‘í•©ë‹ˆë‹¤">ğŸ§¹ ìƒˆë¡œ ì‹œì‘</button>
<a class="btn ghost" id="feedbackBtnStart" target="_blank" rel="noopener">ğŸ’¬ í”¼ë“œë°±</a>

        </div>
      </div>
    </section>

    <!-- ===== Q&A Screen ===== -->
    <section id="qaScreen" class="screen hidden">
      <header>
        <div class="brand">
          <h1 class="title" id="appTitle">ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸</h1>
        </div>
        <div class="pill">ğŸ <span id="yearText"></span> ì—°ë§ ê²°ì‚°</div>
      </header>

      <div class="top-actions">
        <span class="kbd">âŒ¨ï¸ <code>Ctrl</code>+<code>Enter</code> ë‹¤ìŒ</span>
        <button class="ghost" id="shareBtnTop">ğŸ”— ë§í¬ ê³µìœ </button>
        <button class="ghost" id="settingsBtn">âš™ï¸ ì„¤ì •</button>
        <button class="ghost" id="goDoneBtn">âœ… ì™„ë£Œ í˜ì´ì§€</button>
        <button class="ghost" id="goHomeBtn">ğŸ  ì²« í™”ë©´</button>
<a class="btn ghost" id="feedbackBtnTop" target="_blank" rel="noopener">ğŸ’¬ í”¼ë“œë°±</a>

      </div>

      <section class="card">
        <div class="card-head">
          <h2 id="modeTitle">ì§ˆë¬¸ ì¹´ë“œ</h2>
          <div class="pill" id="modePill">âœï¸ ì‘ì„± ì¤‘</div>
        </div>

        <div class="card-body" id="qaBody">
          <div class="progress">
            <div class="bar"><i id="barFill"></i></div>
            <div class="pct" id="pctText">0% Â· 0/0</div>
          </div>

          <div class="qcard" id="qCard">
            <div class="qnum" id="qNum">Q1</div>
            <p class="qtext" id="qText">ì§ˆë¬¸</p>
          </div>

          <textarea id="answer" placeholder="ì—¬ê¸°ì— ë‹µë³€í•´ì¤˜! (ë¹„ì›Œë‘ê³  ë„˜ì–´ê°€ë„ ê´œì°®ì•„!)"></textarea>

          <div class="actions">
            <div class="actions-left">
              <button class="ghost" id="prevBtn">â† ì´ì „</button>
              <button class="ghost" id="skipBtn">â­ï¸ íŒ¨ìŠ¤</button>
            </div>
            <div class="actions-right">
              <button class="danger" id="finishBtn">ğŸ‰ ê²°ì‚° ì™„ë£Œ</button>
              <button class="primary" id="nextBtn">ë‹¤ìŒ â†’</button>
            </div>
          </div>
        </div>
      </section>
    </section>

    <!-- ===== Done Screen ===== -->
    <section id="doneScreen" class="screen hidden">
      <header>
        <div class="brand">
          <h1 class="title">ì™„ë£Œ í˜ì´ì§€</h1>
        </div>
        <div class="pill">ğŸ <span id="yearText2"></span> ì—°ë§ ê²°ì‚°</div>
      </header>

      <div class="top-actions">
        <button class="ghost" id="shareBtnDone">ğŸ”— ë§í¬ ê³µìœ </button>
        <button class="ghost" id="settingsBtn2">âš™ï¸ ì„¤ì •</button>
        <button class="ghost" id="backToQA">âœï¸ ì´ì–´ì„œ ì‘ì„±</button>
        <button class="ghost" id="goHomeBtn2">ğŸ  ì²« í™”ë©´</button>
<a class="btn ghost" id="feedbackBtnDone" target="_blank" rel="noopener">ğŸ’¬ í”¼ë“œë°±</a>

      </div>

      <div class="done-hero">
        <h2>ğŸ‡ ì—°ë§ ê²°ì‚° ì™„ë£Œ!</h2>
        <p>ë³µì‚¬í•˜ê±°ë‚˜, ì•„ë˜ì—ì„œ ì§ˆë¬¸ë³„ë¡œ ëˆŒëŸ¬ì„œ ë°”ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆì–´ìš”.</p>

        <div class="tools">
          <button class="primary" id="copyAllBtn">ì „ì²´ ë³µì‚¬</button>
          <button class="ghost" id="copyAnsweredOnlyBtn">ë‹µë³€í•œ ê²ƒë§Œ ë³µì‚¬</button>
          <button class="danger" id="newStartBtn2">ğŸ§¹ ìƒˆë¡œ ì‹œì‘</button>
        </div>
      </div>

      <section class="card">
        <div class="card-head">
          <h2>ì§ˆë¬¸ë³„ ë‹µë³€ (ëˆŒëŸ¬ì„œ ìˆ˜ì •)</h2>
          <div class="pill">ğŸ§¾ í˜ì´ì§€ë„¤ì´ì…˜ í¸ì§‘</div>
        </div>
        <div class="card-body">
          <div class="list" id="doneList"></div>
        </div>
      </section>
    </section>
  </div>

  <div class="toast" id="toast">
    <span class="dot"></span>
    <span id="toastText">ì™„ë£Œ</span>
  </div>

  <!-- ===== Settings Modal ===== -->
  <div class="overlay" id="settingsOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <div class="modal-head">
        <b id="settingsTitle">âš™ï¸ ì„¤ì •</b>
        <button class="ghost" id="closeSettingsBtn">ë‹«ê¸°</button>
      </div>
      <div class="modal-body">
        <div class="row">
          <input id="customTitle" placeholder="ì˜ˆ: ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸ / 2025 ì—°ë§ ê²°ì‚° / ì˜¬í•´ì˜ ê¸°ë¡" />
          <button class="primary" id="applyTitleBtn">ì œëª© ì ìš©</button>
        </div>

        <p class="help">
          ì§ˆë¬¸ì€ <b>í•œ ì¤„ì— 1ê°œ</b>ì”© ì…ë ¥í•˜ì„¸ìš”. (ì ìš©í•˜ë©´ ì§„í–‰ ìƒíƒœê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤)
        </p>

        <textarea id="questionsEditor" style="min-height:220px;"></textarea>

        <div class="row">
          <button class="danger" id="applyQuestionsBtn">ì§ˆë¬¸ ì ìš©(ì´ˆê¸°í™”)</button>
          <button class="ghost" id="resetQuestionsBtn">ê¸°ë³¸ ì§ˆë¬¸ìœ¼ë¡œ ë³µì›</button>
        </div>

        <p class="help">* ì„œë²„ ì—†ì´ ë™ì‘í•˜ë©°, ì €ì¥ì€ ë‚´ ë¸Œë¼ìš°ì €(localStorage)ì—ë§Œ ë©ë‹ˆë‹¤.</p>
      </div>
    </div>
  </div>

  <!-- ===== Confirm Modal (new start) ===== -->
  <div class="overlay" id="confirmOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
      <div class="modal-head">
        <b id="confirmTitle">ğŸ§¹ ìƒˆë¡œ ì‹œì‘</b>
        <button class="ghost" id="closeConfirmBtn">ë‹«ê¸°</button>
      </div>
      <div class="modal-body">
        <p class="help" style="margin-top:0;">
          ì €ì¥ëœ ì§„í–‰(ë‹µë³€/íŒ¨ìŠ¤/í˜„ì¬ ìœ„ì¹˜)ì„ <b>ëª¨ë‘ ì´ˆê¸°í™”</b>í•˜ê³  ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í• ê¹Œìš”?
        </p>
        <div class="row" style="justify-content:flex-end;">
          <button class="ghost" id="cancelResetBtn">ì·¨ì†Œ</button>
          <button class="danger" id="confirmResetBtn">ì´ˆê¸°í™”í•˜ê³  ì‹œì‘</button>
        </div>
      </div>
    </div>
  </div>

<script>
(() => {
  // =========================
  // ë§í¬
  // =========================
  const EXAMPLE_BLOG_URL = "https://blog.naver.com/garden_2_2/223720793794?trackingCode=blog_bloghome_searchlist";
const FEEDBACK_URL = "https://forms.gle/rzQepJVwQuVyixsy6";
const feedbackBtnStart = document.getElementById("feedbackBtnStart");
const feedbackBtnTop = document.getElementById("feedbackBtnTop");
const feedbackBtnDone = document.getElementById("feedbackBtnDone");
feedbackBtnStart.href = FEEDBACK_URL;
feedbackBtnTop.href = FEEDBACK_URL;
feedbackBtnDone.href = FEEDBACK_URL;

  // =========================
  // Storage Key
  // =========================
  const LS_KEY = "year_review_helper_final_v4";

  // =========================
  // ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸
  // =========================
  const DEFAULT_QUESTIONS = [
    "ì˜¬í•´ì˜ ìœ íŠœë¸ŒëŠ”?","ì˜¬í•´ì˜ ë°°ìš°ëŠ”?","ì˜¬í•´ì˜ ì˜í™”ëŠ”?","ì˜¬í•´ì˜ ì•¨ë²”ì€?","ì˜¬í•´ì˜ ë…¸ë˜ëŠ”?",
    "ì˜¬í•´ì˜ ë“œë¼ë§ˆëŠ”?","ì˜¬í•´ì˜ ì „ì‹œëŠ”?","ì˜¬í•´ì˜ ì±…ì€?","ì˜¬í•´ì˜ ì„œì ì€?","ì˜¬í•´ì˜ ì‘ê°€ëŠ”?",
    "ì˜¬í•´ì˜ ë¬¸ì¥ì€?","ì˜¬í•´ì˜ ë§ì€?","ì˜¬í•´ì˜ ìƒ‰ê¹”ì€?","ì˜¬í•´ì˜ í’ê²½ì€?","ì˜¬í•´ì˜ ë‚˜ë¬´ëŠ”?",
    "ì˜¬í•´ì˜ ìƒˆëŠ”?","ì˜¬í•´ì˜ ìˆ²ì€?","ì˜¬í•´ì˜ ì—¬í–‰ì€?","ì˜¬í•´ì˜ ë‹¬ë¦¬ê¸°ëŠ”?","ì˜¬í•´ì˜ ìˆœê°„ì€?",
    "ì˜¬í•´ì˜ ì²˜ìŒì€?","ì˜¬í•´ì˜ ëì€?",
    "ì˜¬í•´ì˜ ìŒì‹ì€?","ì˜¬í•´ì˜ ë””ì €íŠ¸ëŠ”?","ì˜¬í•´ì˜ ìŒë£ŒëŠ”?","ì˜¬í•´ì˜ ì»¤í”¼ëŠ”?","ì˜¬í•´ì˜ ì‹ë‹¹ì€?",
    "ì˜¬í•´ì˜ í…Œì´í¬ì•„ì›ƒì€?","ì˜¬í•´ì˜ ë§¤ìš´ ë§›ì€?","ì˜¬í•´ì˜ ìŠ¤í¬ì¸ ëŠ”?","ì˜¬í•´ì˜ ì†Œë¹„ëŠ”?","ì˜¬í•´ì˜ íˆ¬ìëŠ”?",
    "ì˜¬í•´ì˜ ì†ì‹¤ì€?","ì˜¬í•´ì˜ ë“í…œì€?","ì˜¬í•´ì˜ êµ¬ë…ì€?","ì˜¬í•´ì˜ ë¸Œëœë“œëŠ”?","ì˜¬í•´ì˜ ì‹ ë°œì€?",
    "ì˜¬í•´ì˜ í‹°ì…”ì¸ ëŠ”?","ì˜¬í•´ì˜ ì˜·ì€?","ì˜¬í•´ì˜ ì•Œì½œì€?",
    "ì˜¬í•´ì˜ ìš´ë™ì€?","ì˜¬í•´ì˜ ê±´ê°•ê´€ë¦¬ëŠ”?","ì˜¬í•´ì˜ ìŠµê´€ì€?",
    "ì˜¬í•´ì˜ ë™ë„¤ëŠ”?","ì˜¬í•´ì˜ ê³µê°„ì€?","ì˜¬í•´ì˜ ì§‘ì€?","ì˜¬í•´ì˜ ì´ë™ìˆ˜ë‹¨ì€?","ì˜¬í•´ì˜ ì‚°ì±…ë¡œëŠ”?",
    "ì˜¬í•´ì˜ ì‚°ì€?","ì˜¬í•´ì˜ ë‹¤ë¦¬ëŠ”?",
    "ì˜¬í•´ì˜ ë™ë£ŒëŠ”?","ì˜¬í•´ì˜ ë™ì—­ìëŠ”?","ì˜¬í•´ì˜ ë„ì›€ì€?","ì˜¬í•´ì˜ í˜¸ìŠ¤íŠ¸ëŠ”?","ì˜¬í•´ì˜ ì‚¬ì¥ë‹˜ì€?",
    "ì˜¬í•´ì˜ ì…€ëŸ½ì€?","ì˜¬í•´ì˜ ì§ê¿ì€?","ì˜¬í•´ì˜ ì¬ë°œê²¬ì€?","ì˜¬í•´ì˜ ê°ì‚¬ëŠ”?","ì˜¬í•´ì˜ ë‚˜ëˆ”ì€?",
    "ì˜¬í•´ì˜ ì„ ë¬¼ì€?","ì˜¬í•´ì˜ ì„±ì·¨ëŠ”?","ì˜¬í•´ì˜ ë„ì „ì€?","ì˜¬í•´ì˜ í”„ë¡œì íŠ¸ëŠ”?","ì˜¬í•´ì˜ í¬ê¸°ëŠ”?",
    "ì˜¬í•´ì˜ ë°œì „ì€?","ì˜¬í•´ì˜ í‡´ë³´ëŠ”?","ì˜¬í•´ì˜ ì•¼ê·¼ì€?","ì˜¬í•´ì˜ ê¸°ëŠ¥ì€?","ì˜¬í•´ì˜ ì–´í”Œì€?",
    "ì˜¬í•´ì˜ ê¸°ì¨/í–‰ë³µì€?","ì˜¬í•´ì˜ ë¿Œë“¯í•¨ì€?","ì˜¬í•´ì˜ ë°•ì¥ëŒ€ì†ŒëŠ”?","ì˜¬í•´ì˜ ì¬ë¯¸ëŠ”?","ì˜¬í•´ì˜ ë‚­ë§Œì€?",
    "ì˜¬í•´ì˜ í‰í™”ëŠ”?","ì˜¬í•´ì˜ ê°ë™ì€?","ì˜¬í•´ì˜ í¬ì—´ì€?","ì˜¬í•´ì˜ ë†€ëŒì€?","ì˜¬í•´ì˜ ì„œí”„ë¼ì´ì¦ˆëŠ”?",
    "ì˜¬í•´ì˜ ì˜ì™¸ëŠ”?","ì˜¬í•´ì˜ ì°¨ê°€ì›€ì€?","ì˜¬í•´ì˜ ëœ¨ê±°ì›€ì€?","ì˜¬í•´ì˜ ì ˆë§ì€?","ì˜¬í•´ì˜ ê³ ë‚œì€?",
    "ì˜¬í•´ì˜ ê³ í†µì€?","ì˜¬í•´ì˜ ìŠ¬í””ì€?","ì˜¬í•´ì˜ ë¶„ë…¸ëŠ”?","ì˜¬í•´ì˜ ì•„ì°”í•¨ì€?","ì˜¬í•´ì˜ ì¶©ê²©ì€?",
    "ì˜¬í•´ì˜ ê±±ì •ì€?","ì˜¬í•´ì˜ ê³ ë¯¼ì€?","ì˜¬í•´ì˜ ì§‘ì°©ì€?","ì˜¬í•´ì˜ íì§€ë¶€ì§€ëŠ”?","ì˜¬í•´ì˜ í›„íšŒëŠ”?",
    "ì˜¬í•´ì˜ ì£„ì†¡ì€?","ì˜¬í•´ì˜ ë‚­ë¹„ëŠ”?","ì˜¬í•´ì˜ ë¶„ì‹¤ì€?","ì˜¬í•´ì˜ ì‹¤íŒ¨ëŠ”?","ì˜¬í•´ì˜ ì‹¤ìˆ˜ëŠ”?",
    "ì˜¬í•´ì˜ ë’·ë¶ì€?","ì˜¬í•´ì˜ ìŒ¤í†µì€?","ì˜¬í•´ì˜ ìµœê³  í‚¹ë°›ëŠ” ìˆœê°„ì€?","ì˜¬í•´ì˜ ì½”í”¼ëŠ”?","ì˜¬í•´ì˜ ì§„ë•€ì€?",
    "ì˜¬í•´ì˜ ìš°ì—°ì€?","ì˜¬í•´ì˜ ë§Œë‚¨ì€?","ì˜¬í•´ì˜ í¸ì§€ëŠ”?","ì˜¬í•´ì˜ ì² í•™ì€?","ì˜¬í•´ì˜ ì„±ì¥ì€?",
    "ì˜¬í•´ì˜ ì˜ê°ì€?","ì˜¬í•´ì˜ ê°•ì—°ì€?","ì˜¬í•´ì˜ ì˜ˆë°°ëŠ”?","ì˜¬í•´ì˜ ì°¬ì–‘ì€?","ì˜¬í•´ì˜ ë§ì”€ì€?",
    "ì˜¬í•´ì˜ ì„ êµëŠ”?",
    "ì˜¬í•´ì˜ ìˆ˜ì§‘ì€?","ì˜¬í•´ì˜ ìƒë‹´ì€?","ì˜¬í•´ì˜ ì…€ì¹´ëŠ”?","ì˜¬í•´ì˜ ê·€ì—¬ì›€ì€?","ì˜¬í•´ì˜ ë‹¹ê·¼ì€?"
  ];

  // =========================
  // Utils
  // =========================
  const normalizeText = (s) => String(s ?? "").trim().replace(/\s+/g, " ");
  const uniqueQuestions = (arr) => {
    const seen = new Set();
    const out = [];
    for(const q of arr){
      const nq = normalizeText(q);
      if(!nq) continue;
      if(seen.has(nq)) continue;
      seen.add(nq);
      out.push(nq);
    }
    return out;
  };

  function safeParseJSON(s){ try { return JSON.parse(s); } catch { return null; } }
  function save(state){ localStorage.setItem(LS_KEY, JSON.stringify(state)); }
  function load(){
    const raw = localStorage.getItem(LS_KEY);
    return raw ? safeParseJSON(raw) : null;
  }
  function esc(s){
    return (s ?? "").replace(/[&<>"']/g, (m) => ({
      "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"
    })[m]);
  }
  function showToast(msg){
    toastText.textContent = msg;
    toast.style.display = "inline-flex";
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=> toast.style.display = "none", 1600);
  }

  // =========================
  // DOM
  // =========================
  const startScreen = document.getElementById("startScreen");
  const qaScreen = document.getElementById("qaScreen");
  const doneScreen = document.getElementById("doneScreen");

  const startBtn = document.getElementById("startBtn");
  const newStartBtn = document.getElementById("newStartBtn");
  const usageBtn = document.getElementById("usageBtn");

  const goHomeBtn = document.getElementById("goHomeBtn");
  const goHomeBtn2 = document.getElementById("goHomeBtn2");

  const settingsBtn = document.getElementById("settingsBtn");
  const settingsBtn2 = document.getElementById("settingsBtn2");
  const goDoneBtn = document.getElementById("goDoneBtn");
  const backToQA = document.getElementById("backToQA");

  const shareBtnTop = document.getElementById("shareBtnTop");
  const shareBtnDone = document.getElementById("shareBtnDone");

  const appTitle = document.getElementById("appTitle");
  const yearText = document.getElementById("yearText");
  const yearText2 = document.getElementById("yearText2");

  const barFill = document.getElementById("barFill");
  const pctText = document.getElementById("pctText");

  const qCard = document.getElementById("qCard");
  const qNum = document.getElementById("qNum");
  const qText = document.getElementById("qText");
  const answerEl = document.getElementById("answer");

  const prevBtn = document.getElementById("prevBtn");
  const skipBtn = document.getElementById("skipBtn");
  const nextBtn = document.getElementById("nextBtn");
  const finishBtn = document.getElementById("finishBtn");

  const doneList = document.getElementById("doneList");

  const copyAllBtn = document.getElementById("copyAllBtn");
  const copyAnsweredOnlyBtn = document.getElementById("copyAnsweredOnlyBtn");
  const newStartBtn2 = document.getElementById("newStartBtn2");

  const toast = document.getElementById("toast");
  const toastText = document.getElementById("toastText");

  const settingsOverlay = document.getElementById("settingsOverlay");
  const closeSettingsBtn = document.getElementById("closeSettingsBtn");
  const customTitle = document.getElementById("customTitle");
  const applyTitleBtn = document.getElementById("applyTitleBtn");
  const questionsEditor = document.getElementById("questionsEditor");
  const applyQuestionsBtn = document.getElementById("applyQuestionsBtn");
  const resetQuestionsBtn = document.getElementById("resetQuestionsBtn");

  const confirmOverlay = document.getElementById("confirmOverlay");
  const closeConfirmBtn = document.getElementById("closeConfirmBtn");
  const cancelResetBtn = document.getElementById("cancelResetBtn");
  const confirmResetBtn = document.getElementById("confirmResetBtn");

  // =========================
  // Year
  // =========================
  const now = new Date();
  const YEAR = now.getFullYear();
  yearText.textContent = YEAR;
  yearText2.textContent = YEAR;

  usageBtn.href = EXAMPLE_BLOG_URL;

  // =========================
  // State
  // =========================
  let state = load() || {
    title: "ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸",
    questions: uniqueQuestions(DEFAULT_QUESTIONS),
    idx: 0,
    answers: {},
    skipped: {},
    view: "qa",
    celebrated: false
  };

  function setTitles(){
    document.title = state.title;
    appTitle.textContent = state.title;

    // OG íƒ€ì´í‹€ë„ ëŸ°íƒ€ì„ì— ë°”ê¿”ì£¼ê¸´ í•˜ì§€ë§Œ,
    // ì‹¤ì œ ê³µìœ  í¬ë¡¤ëŸ¬ëŠ” JS ì‹¤í–‰ ì „ ë©”íƒ€ë§Œ ë³´ëŠ” ê²½ìš°ê°€ ë§ì•„(ì„œë²„ ë Œë”ë§ì´ ìµœìš°ì„ )
    // ê·¸ë˜ë„ ë¸Œë¼ìš°ì € ë‚´ í‘œì‹œìš©ìœ¼ë¡œëŠ” ìœ ì§€
    const ogTitle = document.querySelector('meta[property="og:title"]');
    if(ogTitle) ogTitle.setAttribute("content", state.title);
    const twTitle = document.querySelector('meta[name="twitter:title"]');
    if(twTitle) twTitle.setAttribute("content", state.title);
  }

  function showScreen(name){
    const map = { start: startScreen, qa: qaScreen, done: doneScreen };
    Object.entries(map).forEach(([k, el]) => {
      if(k === name){
        el.classList.remove("hidden");
        el.classList.add("visible");
      }else{
        el.classList.remove("visible");
        el.classList.add("hidden");
      }
    });
  }

  function doneCount(){
    return Object.keys(state.answers).length + Object.keys(state.skipped).length;
  }
  function renderProgress(){
    const total = state.questions.length;
    const done = doneCount();
    const pct = total ? Math.round((done / total) * 100) : 0;
    barFill.style.width = `${pct}%`;
    pctText.textContent = `${pct}% Â· ${done}/${total}`;
  }
  function currentAnswer(){
    return (state.answers[state.idx] ?? "");
  }
  function markAnswer(val){
    const v = String(val ?? "").trimEnd();
    if(v.trim() === ""){
      delete state.answers[state.idx];
      state.skipped[state.idx] = true;
    }else{
      state.answers[state.idx] = v;
      delete state.skipped[state.idx];
    }
  }

  function animateSwap(direction, cb){
    const outClass = direction === "next" ? "anim-out-left" : "anim-out-right";
    const inClass  = direction === "next" ? "anim-in-right" : "anim-in-left";

    qCard.classList.remove("anim-out-left","anim-in-right","anim-out-right","anim-in-left");
    void qCard.offsetWidth;
    qCard.classList.add(outClass);

    setTimeout(() => {
      cb?.();
      qCard.classList.remove(outClass);
      void qCard.offsetWidth;
      qCard.classList.add(inClass);
      setTimeout(()=> qCard.classList.remove(inClass), 380);
    }, 190);
  }

  function renderQA(){
    setTitles();
    renderProgress();

    const total = state.questions.length;
    const i = state.idx;

    qNum.textContent = `Q${i+1}/${total}`;
    qText.textContent = state.questions[i] ?? "ì§ˆë¬¸ ì—†ìŒ";
    answerEl.value = currentAnswer();
    answerEl.disabled = false;

    prevBtn.disabled = i <= 0;

    save(state);
  }

  function renderDone(){
    setTitles();
    const total = state.questions.length;
    const rows = [];

    for(let i=0;i<total;i++){
      const q = state.questions[i];
      const a = (state.answers[i] ?? "").trim();
      const isSkip = !!state.skipped[i] && !a;
      const hasAns = !!a;

      const tag = hasAns ? "ë‹µë³€" : (isSkip ? "íŒ¨ìŠ¤" : "ë¯¸ì‘ë‹µ");
      const ansHtml = hasAns
        ? `<p class="ans">${esc(a)}</p>`
        : `<p class="ans empty">${isSkip ? "íŒ¨ìŠ¤ ì²˜ë¦¬ë¨" : "ì•„ì§ ë‹µë³€ ì—†ìŒ"}</p>`;

      rows.push(`
        <div class="item ${hasAns ? "answered" : ""}">
          <div class="meta">
            <b>${esc(`Q${i+1}. ${q}`)}</b>
            <span class="tag">${esc(tag)}</span>
          </div>
          ${ansHtml}
          <div class="editbtn" data-edit="${i}">âœï¸ ì´ ì§ˆë¬¸ ìˆ˜ì •í•˜ê¸°</div>
        </div>
      `);
    }

    doneList.innerHTML = rows.join("");

    doneList.querySelectorAll("[data-edit]").forEach(el => {
      el.addEventListener("click", () => {
        const i = Number(el.getAttribute("data-edit"));
        state.idx = Math.max(0, Math.min(i, state.questions.length - 1));
        state.view = "qa";
        save(state);
        showScreen("qa");
        renderQA();
        showToast(`Q${i+1} ìˆ˜ì • ì¤‘`);
        setTimeout(()=> answerEl.focus(), 50);
      });
    });

    save(state);
  }

  // =========================
  // âœ… ë³µì‚¬ í¬ë§·
  // - ì „ì²´: ì›ë˜ ì§ˆë¬¸ ë²ˆí˜¸ ìœ ì§€
  // - ë‹µë³€í•œ ê²ƒë§Œ: ë‹µë³€ë§Œ ëª¨ì•„ì„œ 1ë¶€í„° ì¬ë„˜ë²„ë§
  // =========================
  function buildTextAll(){
    const lines = [];
    const total = state.questions.length;

    for(let i=0;i<total;i++){
      const q = state.questions[i];
      const a = (state.answers[i] ?? "").trim();
      const isSkip = !!state.skipped[i] && !a;
      const ansText = a ? a : (isSkip ? "(íŒ¨ìŠ¤)" : "(ë¯¸ì‘ë‹µ)");
      lines.push(`${i+1}) ${q} - ${ansText}`);
    }
    return lines.join("\n").trim() + "\n";
  }

  function buildTextAnsweredOnlyRenumbered(){
    const lines = [];
    const total = state.questions.length;
    let n = 1;

    for(let i=0;i<total;i++){
      const q = state.questions[i];
      const a = (state.answers[i] ?? "").trim();
      if(!a) continue;
      lines.push(`${n}) ${q} - ${a}`);
      n += 1;
    }

function trackFeedbackClick(position){
  if (typeof gtag !== "function") return;

  gtag("event", "feedback_click", {
    event_category: "engagement",
    event_label: position, // start / top / done
  });
}

feedbackBtnStart?.addEventListener("click", () => {
  trackFeedbackClick("start");
});

feedbackBtnTop?.addEventListener("click", () => {
  trackFeedbackClick("top");
});

feedbackBtnDone?.addEventListener("click", () => {
  trackFeedbackClick("done");
});

function handleFeedbackClick(position){
  trackFeedbackClick(position);
  showToast("í”¼ë“œë°± ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ™");
}

    // ë‹µë³€ì´ í•˜ë‚˜ë„ ì—†ì„ ë•Œ
    if(lines.length === 0) return "(ì•„ì§ ë‹µë³€í•œ í•­ëª©ì´ ì—†ì–´ìš”)\n";
    return lines.join("\n").trim() + "\n";
  }

  async function copyToClipboard(text){
    try{
      await navigator.clipboard.writeText(text);
      showToast("ë³µì‚¬ ì™„ë£Œ!");
    }catch{
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      showToast("ë³µì‚¬ ì™„ë£Œ! (fallback)");
    }
  }

  copyAllBtn.addEventListener("click", () => copyToClipboard(buildTextAll()));
  copyAnsweredOnlyBtn.addEventListener("click", () => copyToClipboard(buildTextAnsweredOnlyRenumbered()));

  // =========================
  // âœ… ë§í¬ ê³µìœ  (ì¸ë„¤ì¼ì€ OG ë©”íƒ€ë¡œ)
  // =========================
  function getShareUrl(){
    // ë°°í¬ í™˜ê²½ì—ì„œëŠ” location.hrefê°€ ì‚¬ì´íŠ¸ URLì´ ë¨
    // ë¡œì»¬ file:// í™˜ê²½ì´ë©´ ê³µìœ ê°€ ì˜ë¯¸ê°€ ì•½í•¨(ë¯¸ë¦¬ë³´ê¸° í¬ë¡¤ë§ ë¶ˆê°€)
    return location.href;
  }

  async function shareLink(){
    const url = getShareUrl();
    const title = state.title || "ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸";
    const text = `${YEAR} ì—°ë§ ê²°ì‚° ë§í¬`;

    // Web Share API(ëª¨ë°”ì¼/ì¼ë¶€ ë¸Œë¼ìš°ì €)
    if(navigator.share){
      try{
        await navigator.share({ title, text, url });
        showToast("ë§í¬ ê³µìœ  ì™„ë£Œ!");
        return;
      }catch{
        // ì‚¬ìš©ìê°€ ì·¨ì†Œí•œ ê²½ìš°ë„ ì—¬ê¸°ë¡œ ì˜¬ ìˆ˜ ìˆìŒ
      }
    }
    // fallback: copy
    await copyToClipboard(url);
    showToast("ë§í¬ ë³µì‚¬ ì™„ë£Œ!");
  }

  shareBtnTop.addEventListener("click", shareLink);
  shareBtnDone.addEventListener("click", shareLink);

  // =========================
  // Celebration
  // =========================
  function fireCelebration(){
    const layer = document.createElement("div");
    layer.className = "fx-layer";

    const colors = ["#d12b2b","#ff4a4a","#0c8f47","#f2c14e","#ffffff","#ff7aa2","#6dd3ff"];
    const confCount = 120;

    for(let i=0;i<confCount;i++){
      const c = document.createElement("i");
      c.className = "confetti";
      c.style.left = (Math.random()*100) + "vw";
      c.style.width = (8 + Math.random()*10) + "px";
      c.style.height = (10 + Math.random()*16) + "px";
      c.style.background = colors[Math.floor(Math.random()*colors.length)];
      c.style.animationDuration = (1.8 + Math.random()*1.6) + "s";
      c.style.animationDelay = (Math.random()*0.25) + "s";
      c.style.transform = `translateY(0) rotate(${Math.random()*180}deg)`;
      layer.appendChild(c);
    }

    const bursts = 6;
    for(let b=0;b<bursts;b++){
      const x = 15 + Math.random()*70;
      const y = 18 + Math.random()*45;
      const burstColor = colors[Math.floor(Math.random()*colors.length)];
      for(let k=0;k<10;k++){
        const s = document.createElement("i");
        s.className = "spark";
        s.style.left = x + "vw";
        s.style.top  = y + "vh";
        s.style.background = burstColor;
        s.style.animationDelay = (0.05*b + Math.random()*0.15) + "s";
        s.style.width = (8 + Math.random()*10) + "px";
        s.style.height = s.style.width;
        layer.appendChild(s);
      }
    }

    document.body.appendChild(layer);
    setTimeout(()=> layer.remove(), 2800);
  }

  // =========================
  // Settings
  // =========================
  function openSettings(){
    customTitle.value = state.title;
    questionsEditor.value = state.questions.join("\n");
    settingsOverlay.style.display = "flex";
    settingsOverlay.setAttribute("aria-hidden","false");
  }
  function closeSettings(){
    settingsOverlay.style.display = "none";
    settingsOverlay.setAttribute("aria-hidden","true");
  }

  settingsBtn.addEventListener("click", openSettings);
  settingsBtn2.addEventListener("click", openSettings);
  closeSettingsBtn.addEventListener("click", closeSettings);
  settingsOverlay.addEventListener("click", (e) => {
    if(e.target === settingsOverlay) closeSettings();
  });

  applyTitleBtn.addEventListener("click", () => {
    const t = (customTitle.value ?? "").trim();
    state.title = t.length ? t : "ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸";
    save(state);
    setTitles();
    showToast("ì œëª© ì ìš© ì™„ë£Œ!");
  });

  function normalizeQuestions(text){
    return uniqueQuestions(String(text ?? "").split("\n").map(s => s.trim()).filter(Boolean));
  }

  applyQuestionsBtn.addEventListener("click", () => {
    const qs = normalizeQuestions(questionsEditor.value);
    if(qs.length < 1){
      showToast("ì§ˆë¬¸ì´ ìµœì†Œ 1ê°œëŠ” í•„ìš”í•´!");
      return;
    }
    state.questions = qs;
    state.idx = 0;
    state.answers = {};
    state.skipped = {};
    state.view = "qa";
    state.celebrated = false;
    save(state);
    closeSettings();
    showScreen("qa");
    renderQA();
    showToast("ì§ˆë¬¸ ì ìš© & ì´ˆê¸°í™” ì™„ë£Œ!");
  });

  resetQuestionsBtn.addEventListener("click", () => {
    questionsEditor.value = uniqueQuestions(DEFAULT_QUESTIONS).join("\n");
    showToast("ê¸°ë³¸ ì§ˆë¬¸ìœ¼ë¡œ ë³µì›!");
  });

  // =========================
  // Reset confirm
  // =========================
  function openConfirm(){
    confirmOverlay.style.display = "flex";
    confirmOverlay.setAttribute("aria-hidden","false");
  }
  function closeConfirm(){
    confirmOverlay.style.display = "none";
    confirmOverlay.setAttribute("aria-hidden","true");
  }
  newStartBtn.addEventListener("click", openConfirm);
  newStartBtn2.addEventListener("click", openConfirm);
  closeConfirmBtn.addEventListener("click", closeConfirm);
  cancelResetBtn.addEventListener("click", closeConfirm);
  confirmOverlay.addEventListener("click", (e) => {
    if(e.target === confirmOverlay) closeConfirm();
  });

  function resetAll(){
    state = {
      title: "ì—°ë§ ê²°ì‚° ë„ìš°ë¯¸",
      questions: uniqueQuestions(DEFAULT_QUESTIONS),
      idx: 0,
      answers: {},
      skipped: {},
      view: "qa",
      celebrated: false
    };
    save(state);
  }

  confirmResetBtn.addEventListener("click", () => {
    resetAll();
    closeConfirm();
    showScreen("qa");
    renderQA();
    showToast("ìƒˆë¡œ ì‹œì‘!");
  });

  // =========================
  // Navigation
  // =========================
  function showStart(){
    showScreen("start");
  }
  function showQA(){
    showScreen("qa");
    renderQA();
    setTimeout(()=> answerEl.focus(), 50);
  }
  function showDone(){
    showScreen("done");
    renderDone();
  }

  startBtn.addEventListener("click", () => {
    state.view = "qa";
    save(state);
    showQA();
  });

  goHomeBtn.addEventListener("click", () => {
    showStart();
    showToast("ì²« í™”ë©´ìœ¼ë¡œ ì´ë™!");
  });
  goHomeBtn2.addEventListener("click", () => {
    showStart();
    showToast("ì²« í™”ë©´ìœ¼ë¡œ ì´ë™!");
  });

  goDoneBtn.addEventListener("click", () => {
    state.view = "done";
    save(state);
    showDone();
    showToast("ì™„ë£Œ í˜ì´ì§€ë¡œ ì´ë™!");
  });

  backToQA.addEventListener("click", () => {
    state.view = "qa";
    save(state);
    showQA();
    showToast("ì‘ì„± í™”ë©´ìœ¼ë¡œ ì´ë™!");
  });

  // =========================
  // Q&A actions
  // =========================
  prevBtn.addEventListener("click", () => {
    markAnswer(answerEl.value);
    if(state.idx <= 0) return;

    animateSwap("prev", () => {
      state.idx -= 1;
      save(state);
      renderQA();
    });
  });

  skipBtn.addEventListener("click", () => {
    markAnswer("");
    if(state.idx < state.questions.length - 1){
      animateSwap("next", () => {
        state.idx += 1;
        save(state);
        renderQA();
      });
    }else{
      showToast("ë§ˆì§€ë§‰ ì§ˆë¬¸ì´ì•¼! ì™„ë£Œí•´ë„ ë¼.");
      renderQA();
    }
  });

  nextBtn.addEventListener("click", () => {
    markAnswer(answerEl.value);
    if(state.idx < state.questions.length - 1){
      animateSwap("next", () => {
        state.idx += 1;
        save(state);
        renderQA();
      });
    }else{
      showToast("ë§ˆì§€ë§‰ ì§ˆë¬¸ì´ì•¼! ê²°ì‚° ì™„ë£Œ ë²„íŠ¼ì„ ëˆŒëŸ¬ë´ ğŸ‰");
      renderQA();
    }
  });

  finishBtn.addEventListener("click", () => {
    markAnswer(answerEl.value);

    state.view = "done";
    save(state);

    showDone();

    if(!state.celebrated){
      state.celebrated = true;
      save(state);
      fireCelebration();
    }
    showToast("ì—°ë§ ê²°ì‚° ì™„ë£Œ! ğŸ‡");
  });

  answerEl.addEventListener("keydown", (e) => {
    if((e.ctrlKey || e.metaKey) && e.key === "Enter"){
      e.preventDefault();
      nextBtn.click();
    }
  });

  // =========================
  // Boot
  // =========================
  setTitles();

  const hasAnyProgress = !!(Object.keys(state.answers).length || Object.keys(state.skipped).length || state.idx > 0);
  if(hasAnyProgress){
    if(state.view === "done"){
      showDone();
    }else{
      showQA();
    }
  }else{
    showStart();
  }
})();
</script>
</body>
</html>
